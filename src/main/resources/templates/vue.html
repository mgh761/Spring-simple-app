<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Adventures</title>

    <link href="style.css" rel="stylesheet"/>
    <script src="https://unpkg.com/vue@2.5.8/dist/vue.js"></script>
    <script src="https://unpkg.com/axios@0.17.1/dist/axios.min.js"></script>
    <script href="../vue.js"></script>
    <link rel="stylesheet" href="../style.css">
</head>

<body>

<div id="Adv">
    <section class="app">
        <header class="header">
            <h1>Adventures</h1>

            <input class="new-adv"
                   type="text"
                   name="typeOfSport"
                   id="ifType"
                   placeholder="Type of sport">
            <input class="new-adv"
                   type="text"
                   name="time"
                   id="ifTime"
                   placeholder="Period of time">

            <div class="col" v-if="adv.length > 0" >
                <button type="submit" onclick="addAdventure()" class="btn btnType1">Add</button> <br/>
            </div>

        </header>
    </section>


    <section class="app">
        <header>
            <h5>Look what we found</h5>
            <button type="submit" onclick="getAllAdventures()" class="btn btnType1">Search</button> <br/>

            <div>
                <ul th:each="adventure : ${adventures}">
                    <li th:text="${adventures}"></li>
                </ul>
            </div>

        </header>
    </section>

</div>



<script>

    new Vue({
        el: '#app',
        data: {
            period: '',
            typeOfSport: '',
            adv: '',
            advs: []

        },
        methods: {

            search: function () {
                window.location.href = 'http://localhost:9090/api/vl/bonus/?sport=ATV';
                var thisObj = this;
                axios.get()
                    .then(function (response) {
                        console.log("success");
                        thisObj.advs = response.data;
                    })


            },

            getAllAdventures: function () {
                var vm = this;
                axios({
                    url:'http://localhost:9090/api/vl/adventures/all',
                    method: 'get'
                }).then(function (response) {
                    vm.adv = response.adv;
                    console.log(response);

                })

            },

            addAdventure: function () {
                idType = document.getElementById("idType").value;
                idTime = document.getElementById("idTime").value;
                axios({
                    method: 'post',
                    url: 'http://localhost:9090/api/v1/adventures/add',
                    data: {
                        typeOfSport: idType,
                        time: idTime
                    }
                });
            }
        },
        mounted: function(){
            this.getAllAdventures();
        }

    })
</script>
</body>
</html>